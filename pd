#!/bin/bash
declare -a originType=(
"bibtex"
"biblatex"
"commonmark"
"commonmark_x"
"creole"
"csljson"
"csv"
"tsv"
"docbook"
"docx"
"dokuwiki"
"endnotexml"
"epub"
"fb2"
"gfm"
"haddock"
"html"
"ipynb"
"jats"
"jira"
"json"
"latex"
"markdown"
"markdown_mmd"
"markdown_phpextra"
"markdown_strict"
"mediawiki"
"man"
"muse"
"native"
"odt"
"opml"
"org"
"ris"
"rtf"
"rst"
"t2t"
"textile"
"tikiwiki"
"twiki"
"vimwiki"
)
declare -a convertType=(
"asciidoc"
"asciidoctor"
"beamer"
"bibtex"
"biblatex"
"commonmark"
"commonmark_x"
"context"
"csljson"
"docbook"
"docbook4"
"docbook5"
"docx"
"dokuwiki"
"epub"
"epub3"
"epub2"
"fb2"
"gfm"
"haddock"
"html"
"html4"
"icml"
"ipynb"
"jats_archiving"
"jats_articleauthoring"
"jats_publishing"
"jats"
"jira"
"json"
"latex"
"man"
"markdown"
"markdown_mmd"
"markdown_phpextra"
"markdown_strict"
"markua"
"mediawiki"
"ms"
"muse"
"native"
"odt"
"opml"
"opendocument"
"org"
"pdf"
"plain"
"pptx"
"rst"
"rtf"
"texinfo"
"textile"
"slideous"
"slidy"
"dzslides"
"revealjs"
"s5"
"tei"
"xwiki"
"zimwiki"
)
from=$(printf '%s\n' "${originType[@]}"|fzf +m -i --prompt="From >")
to=$(printf '%s\n' "${convertType[@]}"|fzf +m -i --prompt="To >")
file=$(fzf +m -i --prompt="File >")
if [[ $from = "vimwiki" ]]; then
	if [[ $to = "markdown" ]];then 
		pandoc -f $from -t $to $file -o $(echo $file| sed "s/$from/md/g")
	else
		pandoc -f $from -t $to $file -o $(echo $file| sed "s/wiki/$to/g")
	fi
elif [[ $from = "markdown" ]];then
	pandoc -f $from -t $to $file -o $(echo $file| sed "s/md/$to/g")
elif [[ $to = "markdown" ]];then 
	pandoc -f $from -t $to $file -o $(echo $file| sed "s/$from/md/g")
else
	pandoc -f $from -t $to $file -o $(echo $file| sed "s/$from/$to/g")
fi
